# sarsim
Simulation of multi-channel SAR signals in python

## Pupose
This repository of python code contains coded algorithms for generating simulations
of SAR signals. Specifically, the SAR signals are generated from a multi-channel
phased-array or similar system. The aim is to provide expected results from different
configurations of a multi-channel SAR system for different objectives inlcuding
- High Resolution Wide Swath (HRWS) modes
- SUper REsolution Stripmap (SURE) modes 
- Uniform arclength sampled signals for long aperture SAR, and expected Omega-K processing

## Motivation
Python contains all the tools required to generate this type of simulation. For those without access
to commercial software, such as Matlab, Mathematica, IDL, e.t.c., this package provides an
alternative means to generate simulations.

## Python Tools
Python libraries used include (bold entries are essential)
- **scipy**
- **numpy**
- **numba**
- **matplotlib**
- **tqdm**
- **lxml**
- Jupyter 
- Jupyterlab

These can be installed with anaconda using

**conda install conda-build spyder jupyter jupyterlab numpy numba scipy lxml matplotlib cudatoolkit**

## Method of simulation
Simulations are drived from XML configuration files. The goal is to model the signal capture 
configuration in these XML files and produce the expected Point Spread Function (PSF), also 
in the presence of noise.

The XML configuration file describes the radar antenna, the radar mode and the radar platform during
image capture. The flexibility of the XML description allows for 
- Standard stripmap
- HRWS
- SURE
- Ping-pong modes
- Variable beams from pulse to pulse or burst to burst
- Variable phase centres from pulse to pulse or burst to burst

XML configuration files can be generated by the provided python scripts (generateSURE.py)

## Running the code
- Generate the simulation xml file. For example:

  `python -m generateSUREConfig --config-xml simulation_40cm.xml --az-resolution=0.4 --rn-resolution=0.4`
  
- Setup the simulation by generating pickle files for objects that take time to compute. 
  
  For example:
  
  `python -m setupSimulation --config-xml --rblock-size=400 --xblock-size=16384`
  
  This script also generates a bash script designed to run the rest of the 
  simulation. The script can run the commands in parallel up to each **wait** 
  point. The script file is named, in the case above, simulation_40cm.sh
- Compute the raw data signals with the
  
  `python -m generateMsar`
  
  commands found in the commands file
- Multi-channel process these raw signals with the
  
  `python -m processMultiChannel`
  
  commands found in the commands file
- SAR process the multi-channel processed signal with the
  
  `python -m sarProcess`
  
  commands found in the commands file
  
## To do
- [x] Implement tqdm progressbar update
- [ ] Investigate how to make a script to fire the processing on a cluster
- [x] Split data into manageable chunks for processing
- [ ] Confirm that the FFT interpolation with frequency offet is working 